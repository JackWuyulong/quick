<!doctype html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Document</title>
	<link rel="stylesheet" type="text/css" href="__ROOT__/Index/Common/css/shopCar.css">
	<script type="text/javascript" src="__ROOT__/Index/Common/js/jquery-3.1.1.min.js"></script>
</head>
<body>
	<include file="public:header"/>
	<div class="shopContent">
			<div class="pullList">
				<div class="item">
    		<ul>
    			<li>
    				<h5><span class="itemImg itemImgF"></span>&nbsp;办公电脑</h5>
    				<a href="">一体机</a>
    				<a href="">笔记本电脑</a>
    				<a href="">台式机</a>
    			</li>
    			<li>
    				<h5><span class="itemImg itemImgS"></span>&nbsp;办公外设</h5>
    				<a href="">投影仪</a>
    				<a href="">电视</a>
    				<a href="">净化器</a>
    				<a href="">平板</a>
    				<a href="">手机</a>
    				<a href="">显示器</a>
    				<a href="">打印机</a>
    				<a href="">配件</a>
    			</li>
    			<li>
    				<h5><span class="itemImg itemImgT"></span>&nbsp;办公服务</h5>
    				<a href="">办公软件</a>
    				<a href="">IT服务</a>
    			</li>
    			<li>
    				<h5><span class="itemImg itemImgFour"></span>&nbsp;使用场景</h5>
    				<a href="">普通办公</a>
    				<a href="">技术开发</a>
    				<a href="">轻薄便捷</a>
    				<a href="">图形设计</a>
    			</li>
    			<li>
    				<h5><span class="itemImg itemImgFive"></span>&nbsp;价格区间</h5>
    				<a href="">0~100元</a>
    				<a href="">100元~150元</a>
    				<a href="">150元~300元</a>
    				<a href="">300元以上</a>
    			</li>
    		</ul>
    	</div>
			</div>
			
		<div class="shopTitle">
			<a href="__APP__/Index/index" class="jumpIndex">首页</a>
			<img src="__ROOT__/Index/Common/img/shopCar/big.png" alt="" />
			<a href="" class="car">购物车</a>
		</div>
		<div class="carList">
				<table>
					<thead>
						<tr>
							<td width="50px">选择</td>
							<td width="400px">商品信息</td>
							<td width="80px">租金元/月</td>
							<td width="100px">押金</td>
							<td width="100px">数量</td>
							<td width="100px">起租日期</td>
							<td width="80px">租期(月)</td>
							<td width="100px">小计(元)</td>
							<td width="80px"><span>操作</span></td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>
								<input type="checkbox" class="select" checked="checked" />
							</td>
							<td width="557px">
								<div>
									<div class="ListImg">
										<a href="">
											<img src="__ROOT__/Index/Common/img/index/hotImgF.png" alt="" width="110px;" />
										</a>
										
									</div>
									<p class="ListTitle">
											<a href="" title="全新惠普（HP）340 G3 14英寸 win10 home版商务办公笔记本电脑">全新惠普（HP）340 G3 14英寸 win10 home版商务办公笔记本电脑</a>
									</p>
									<p class="ListTitleS">i3/4G/500G/集显/win10 home版 </p>
									<div class="tip">
										普通租赁
									</div>
								</div>
							</td>
							<td class="moneyEach">
								238.00
							</td>
							<td>
								5350.00
							</td>
							<td>
								<div class="num">
									<span>-</span>
									<input type="text" value="1" />
									<span>+</span>
								</div>
							</td>
							<td>
								 2017-08-08
							</td>
							<td>
								24
							</td>
							<td style="color: red" class="payEach">
								238
							</td>
							<td>
								<span class="doIt">删除</span>
							</td>
						</tr>
						<tr>
							<td>
								<input type="checkbox" class="select" checked="checked"  />
							</td>
							<td width="557px">
								<div>
									<div class="ListImg">
										<a href="">
											<img src="__ROOT__/Index/Common/img/index/hotImgF.png" alt="" width="110px;" />
										</a>
										
									</div>
									<p class="ListTitle">
											<a href="" title="全新惠普（HP）340 G3 14英寸 win10 home版商务办公笔记本电脑">全新惠普（HP）340 G3 14英寸 win10 home版商务办公笔记本电脑</a>
									</p>
									<p class="ListTitleS">i3/4G/500G/集显/win10 home版 </p>
									<div class="tip">
										普通租赁
									</div>
								</div>
							</td>
							<td class="moneyEach">
								238.00
							</td>
							<td>
								5350.00
							</td>
							<td>
								<div class="num">
									<span>-</span>
									<input type="text" value="1" />
									<span>+</span>
								</div>
							</td>
							<td>
								 2017-08-08
							</td>
							<td>
								24
							</td>
							<td style="color: red" class="payEach">
								238
							</td>
							<td>
								<span class="doIt">删除</span>
							</td>
						</tr>

					</tbody>
				</table>
				<div class="listFoot">
					<div class="listFootLeft">
						<input type="checkbox" onclick="sub()" id="touch" checked="checked" />
						&nbsp;
						<label class="selectAll" for="touch" >全选</label>
						&nbsp;
						<span class="chooseDel">删除选中商品</span>
						&nbsp;
						<span class="clearAll">清空购物车</span>
					</div>
					<div class="listFootRight">
						<span>已选择商品&nbsp;<span class="allItems">2</span>&nbsp;件</span>
						<span>应付总金额:&nbsp;￥<span class="AllPay">436.00</span></span>&nbsp;&nbsp;&nbsp;
						<a href="">去结算</a>
					</div>
				</div>
		</div>
		<div class="shopCarBand">
			<ul>
				<li>
					<p>
						<img src="__ROOT__/Index/Common/img/shopCar/greenMoney.png" alt="" />
					</p>
					<p>企业免押金</p>
				</li>
				<li>
					<p>
						<img src="__ROOT__/Index/Common/img/shopCar/loading.png" alt="" />
					</p>
					<p>随租随还</p>
				</li>
				<li>
					<p>
						<img src="__ROOT__/Index/Common/img/shopCar/shakeLight.png" alt="" />
					</p>
					<p>闪电租赁</p>
				</li>
				<li>
					<p>
						<img src="__ROOT__/Index/Common/img/shopCar/protect.png" alt="" />
					</p>
					<p>全程保修</p>
				</li>
			</ul>
		</div>
	</div>
	<include file="public:bottom"/>
</body>
<script type="text/javascript">
	// 点击全选框完成全部勾选或删除
	function sub(){
		$select = $("#touch").prop("checked");
		$(".select").prop("checked",$select);
		pay();
		if($select==true){
			$(".allItems").html($("tbody tr").length);
			$(".AllPay").html();
			$(".listFootRight a").css("background","rgb(136,196,57)")
		}else{
			$(".allItems").html(0);
			$(".listFootRight a").css("background","rgb(217, 217, 217)")
		}
		
	}
	//点击单选框效果
	$(".select").on("click",function(){
		//实现与全选框的关联
		var length = $("tbody tr").length;
		if($(".select:checked").length==length){
			$("#touch").prop("checked",true);
		}else{
			$("#touch").prop("checked",false);
		}
		$(".allItems").html($(".select:checked").length);
		pay();
		if($(".select:checked").length!=0){
			$(".listFootRight a").css("background","rgb(136,196,57)")
		}else{

			$(".listFootRight a").css("background","rgb(217, 217, 217)")
		}
	})
	//点击商品数量按钮实现小计功能
	$(".num span").on("click",function(){
		var numSelect = $(this).parents("tr").find(".select").prop("checked");
		var moneyMonth = $(this).parents("tr").find(".moneyEach").html();
		if(numSelect==true){
			if($(this).html()=="-"){
				var countDown = $(this).next().val();
				if (countDown>1) {
					var moneyPay = moneyMonth*countDown;
					countDown--;
					$(this).next().val(countDown);
					$(this).parents("tr").find(".payEach").html(moneyPay);
				}
			}else{
				var countUp = $(this).prev().val();
				countUp++;
				$(this).prev().val(countUp);
				var money = moneyMonth*countUp;
				$(this).parents("tr").find(".payEach").html(money);
			}
			
			
		}else{
			alert("请先选中商品");
		}
		pay();
	})
	function pay(){
		var payAllMoney = 0;
		var arrMoney = $("tbody .select:checked").parents("tr").find(".payEach");
		arrMoney.each(function(){
			payAllMoney += Number($(this).html());
			
		})
		$(".AllPay").html(payAllMoney);
	}
	//删除功能;
		$(".doIt").on("click",function(){
			var control =$(this).parents("tr").find(".select").prop("checked");
			if (control==true) {
				$(this).parents("tr").remove();
				pay();
				$(".allItems").html($(".select:checked").length);
			}else{
				alert("请选中商品后再删除");
			}
			
		})
	//删除选中商品
		$(".chooseDel").on("click",function(){
			var judge = $(".select:checked").length;
			if (judge!=0) {
				$(".select:checked").parents("tr").remove();
				pay();
				$(".allItems").html($(".select:checked").length);
			}else{
				alert("没有要删除的商品");
			}
			
		})
	//清空购物车
		$(".clearAll").on("click",function(){
			$("tbody tr").remove();
			pay();
			$(".allItems").html($(".select:checked").length);
		})	
	//下来菜单
	$(".pullList").hover(function(){
		$(".item").slideToggle("100");
		$(".item ul").hover(function(){
			$(".item").css("display","block")
		})
	})
</script>
</html>